<DOCTYPE! html>
  <html lang="en-us">
    <head>
        <meta charset="UTF-8">
        <title>pyBlock</title>
        <link href='StylesPages/PlayStyle.css' rel='stylesheet'>
        <!-- Include Blockly core library -->
        <script src="https://unpkg.com/blockly/blockly.min.js"></script>
        <!-- Include Python code generator -->
        <script src="https://unpkg.com/blockly/python.min.js"></script> <!-- this is not working together with the html page will update later-->
        <!-- Include custom blocks and generators -->
        <script src="custom-generator-codelab/blocks/custom_blocks.js"></script>
        <script src="custom-generator-codelab/generators/python/custom_python.js"></script>
        
    </head>
    <body>
<!-- NAV BAR START -->
     <header class="navigation">

      <!-- List for the logo on the page -->
      <ul class="navbar_logo">
        <li>
          <a href="HomePage.html">
            <img class = logo src = "ImagesUsed/pyBlocks_Updated.png" alt = "PyBlocks logo">
          </a>
        </li>
      </ul>

      <!-- List for the Buttons on the navigation pane -->
      <ul class="navbar_buttons_list">
        <li>
          <a>
            <button class="Nav_Buttons">Contact Us</button> <!-- TBC in another sprint -->
          </a>
        </li>
        <li>
          <a>
            <button class="Nav_Buttons">Tutorials</button> <!-- TBC in another sprint -->
          </a>
        </li>
        <li>
          <a href = "PlayPage.html">
            <button class="Nav_Buttons">Play</button>
          </a>
        </li>
        <li>
          <a>
            <button class="Nav_Buttons">Courses</button> <!-- TBC in another sprint -->
          </a>
        </li>
        <li>
          <a>
            <button class="Nav_Buttons">Resources</button> <!-- TBC in another sprint -->
          </a>
        </li>
        <li>
          <a href = "LoginPage.html">
            <button class="SignInRegister_Nav_Button">Sign In</button>
          </a>
        </li>
        <li>
          <a href= "RegisterPage.html">
            <button class="SignInRegister_Nav_Button">Register</button>
          </a>
        </li>
      </ul>
    </header>
<!-- NAV BAR END -->

<!-- BODY START -->
      <div class="PlayPage_Body">
        <div class="container">

      <!-- Left panel: Code output -->
  
          <div class="code-pane">
    
            <h2>Generated Python Code</h2>
            <pre id="output"></pre>
    
          </div>

    <!-- Right panel: Blockly workspace -->
          <div id="blocklyDiv"></div>
        </div>

  <!-- Toolbox definition for Blockly -->
  <xml id="toolbox" style="display: none">
    <!-- Standard Blockly blocks -->
    <category name="Logic" colour="%{BKY_LOGIC_HUE}">

      <block type="controls_if"></block>
      <block type="logic_compare"></block>
      <block type="logic_operation"></block>
      <block type="logic_boolean"></block>

    </category>
    <category name="Loops" colour="%{BKY_LOOPS_HUE}">

      <block type="controls_repeat_ext">

        <value name="TIMES">

          <shadow type="math_number">

            <field name="NUM">10</field>

          </shadow>
        </value>
      </block>
      <block type="controls_whileUntil"></block>
    </category>

    <category name="Math" colour="%{BKY_MATH_HUE}">

      <block type="math_number"></block>
      <block type="math_arithmetic"></block>
      <block type="math_single"></block>

    </category>

    <!-- Custom blocks defined in custom_blocks.js -->
    <category name="Custom Blocks" colour="210">
      <block type="custom_print"></block>
    </category>
  </xml>

  <script>
    // Initialize Blockly workspace with the toolbox

    const workspace = Blockly.inject('blocklyDiv', {
      toolbox: document.getElementById('toolbox'),
      scrollbars: true,
      trashcan: true
    });

    // Function to generate Python code from blocks and display it
    function generateCode() {
      try {
        const code = Blockly.Python.workspaceToCode(workspace);
        document.getElementById('output').textContent = code || "No code generated.";
      } catch (e) {
        document.getElementById('output').textContent = "Error generating code: " + e.message;
      }
    }

    // Trigger code generation whenever the workspace changes
    workspace.addChangeListener(generateCode);
  </script>
        <!-- !!Write main body of page.!! -->
        <!-- !! Will integrate with block code created by Amanda and Tomiwa -->
      </div>
<!-- BODY END -->

<!-- FOOTER START -->
<footer role="contentinfo">

  <!-- List for the logo on the page -->
  <ul class="navbar_logo">
    <li>
      <a href="HomePage.html">
        <img class = logo src = "ImagesUsed/pyBlocks_Updated.png" alt = "PyBlocks logo, linking back to home page">
      </a>
    </li>
  </ul>

  <!-- List for the links in the footer -->
  <ul class="footer_buttons">
    <li><a href="#resources" aria-label="Resources section (Coming soon)">Resources</a></li>
    <li><a href="#tutorials" aria-label="Tutorials section (Coming soon)">Tutorials</a></li>
    <li><a href="#editors" aria-label="Open blank editors (Coming soon)">Open Blank Editors</a></li>
  </ul>
  <!-- holds links and some navigation, may add more later -->
</footer>
<!-- FOOTER END -->
</body>
</html>
